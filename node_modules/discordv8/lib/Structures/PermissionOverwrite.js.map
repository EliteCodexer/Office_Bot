{"version":3,"sources":["../../src/Structures/PermissionOverwrite.js"],"names":["PermissionOverwrite","constructor","data","id","type","deny","allow","allowed","permName","push","denied","toObject","keys","obj","k","setAllowed","allowedArray","forEach","permission","String","setDenied","deniedArray"],"mappings":"AAAA;;;;;;AAEA;;AAEe,MAAMA,mBAAN,CAA0B;;AAExCC,aAAYC,IAAZ,EAAkB;AACjB,OAAKC,EAAL,GAAUD,KAAKC,EAAf;AACA,OAAKC,IAAL,GAAYF,KAAKE,IAAjB,CAFiB,CAEM;AACvB,OAAKC,IAAL,GAAYH,KAAKG,IAAjB;AACA,OAAKC,KAAL,GAAaJ,KAAKI,KAAlB;AACA;;AAED;AACA,KAAIC,OAAJ,GAAa;AACZ,MAAIA,UAAU,EAAd;AACA,OAAK,IAAIC,QAAT,4BAAkC;AACjC,OAAGA,aAAa,aAAb,IAA8BA,aAAa,gBAA9C,EAA+D;AAC9D;AACA;AACA;;AAED,OAAG,CAAC,EAAE,KAAKF,KAAL,GAAa,uBAAYE,QAAZ,CAAf,CAAJ,EAA0C;AACzCD,YAAQE,IAAR,CAAaD,QAAb;AACA;AACD;AACD,SAAOD,OAAP;AACA;;AAED;AACA,KAAIG,MAAJ,GAAY;AACX,MAAIA,SAAS,EAAb;AACA,OAAK,IAAIF,QAAT,4BAAkC;AACjC,OAAGA,aAAa,aAAb,IAA8BA,aAAa,gBAA9C,EAA+D;AAC9D;AACA;AACA;;AAED,OAAG,CAAC,EAAE,KAAKH,IAAL,GAAY,uBAAYG,QAAZ,CAAd,CAAJ,EAAyC;AACxCE,WAAOD,IAAP,CAAYD,QAAZ;AACA;AACD;AACD,SAAOE,MAAP;AACA;;AAEDC,YAAW;AACV,MAAIC,OAAO,CAAC,IAAD,EAAO,MAAP,EAAe,OAAf,EAAwB,MAAxB,CAAX;AAAA,MACCC,MAAM,EADP;;AAGA,OAAK,IAAIC,CAAT,IAAcF,IAAd,EAAoB;AACnBC,OAAIC,CAAJ,IAAS,KAAKA,CAAL,CAAT;AACA;;AAED,SAAOD,GAAP;AACA;;AAEDE,YAAWC,YAAX,EAAwB;AACvBA,eAAaC,OAAb,CAAuBC,UAAD,IAAgB;AACrC,OAAGA,sBAAsBC,MAAtB,IAAgC,OAAOD,UAAP,KAAsB,QAAzD,EAAkE;AACjEA,iBAAa,uBAAYA,UAAZ,CAAb;AACA;AACD,OAAGA,UAAH,EAAc;AACb,SAAKZ,KAAL,IAAe,KAAKY,UAApB;AACA;AACD,GAPD;AAQA;;AAEDE,WAAUC,WAAV,EAAsB;AACrBA,cAAYJ,OAAZ,CAAsBC,UAAD,IAAgB;AACpC,OAAGA,sBAAsBC,MAAtB,IAAgC,OAAOD,UAAP,KAAsB,QAAzD,EAAkE;AACjEA,iBAAa,uBAAYA,UAAZ,CAAb;AACA;AACD,OAAGA,UAAH,EAAc;AACb,SAAKb,IAAL,IAAc,KAAKa,UAAnB;AACA;AACD,GAPD;AAQA;AAxEuC;kBAApBlB,mB","file":"PermissionOverwrite.js","sourcesContent":["\"use strict\";\n\nimport {Permissions} from \"../Constants\";\n\nexport default class PermissionOverwrite {\n\n\tconstructor(data) {\n\t\tthis.id = data.id;\n\t\tthis.type = data.type; // member or role\n\t\tthis.deny = data.deny;\n\t\tthis.allow = data.allow;\n\t}\n\n\t// returns an array of allowed permissions\n\tget allowed(){\n\t\tvar allowed = [];\n\t\tfor( var permName in Permissions ){\n\t\t\tif(permName === \"manageRoles\" || permName === \"manageChannels\"){\n\t\t\t\t// these permissions do not exist in overwrites.\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif(!!(this.allow & Permissions[permName])){\n\t\t\t\tallowed.push(permName);\n\t\t\t}\n\t\t}\n\t\treturn allowed;\n\t}\n\n\t// returns an array of denied permissions\n\tget denied(){\n\t\tvar denied = [];\n\t\tfor( var permName in Permissions ){\n\t\t\tif(permName === \"manageRoles\" || permName === \"manageChannels\"){\n\t\t\t\t// these permissions do not exist in overwrites.\n\t\t\t\tcontinue;\n\t\t\t}\n\n\t\t\tif(!!(this.deny & Permissions[permName])){\n\t\t\t\tdenied.push(permName);\n\t\t\t}\n\t\t}\n\t\treturn denied;\n\t}\n\n\ttoObject() {\n\t\tlet keys = ['id', 'type', 'allow', 'deny'],\n\t\t\tobj = {};\n\n\t\tfor (let k of keys) {\n\t\t\tobj[k] = this[k];\n\t\t}\n\t\t\n\t\treturn obj;\n\t}\n\n\tsetAllowed(allowedArray){\n\t\tallowedArray.forEach( (permission) => {\n\t\t\tif(permission instanceof String || typeof permission === \"string\"){\n\t\t\t\tpermission = Permissions[permission];\n\t\t\t}\n\t\t\tif(permission){\n\t\t\t\tthis.allow |= (1 << permission);\n\t\t\t}\n\t\t} );\n\t}\n\n\tsetDenied(deniedArray){\n\t\tdeniedArray.forEach( (permission) => {\n\t\t\tif(permission instanceof String || typeof permission === \"string\"){\n\t\t\t\tpermission = Permissions[permission];\n\t\t\t}\n\t\t\tif(permission){\n\t\t\t\tthis.deny |= (1 << permission);\n\t\t\t}\n\t\t} );\n\t}\n}\n"]}