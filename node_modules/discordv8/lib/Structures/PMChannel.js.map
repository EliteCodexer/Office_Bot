{"version":3,"sources":["../../src/Structures/PMChannel.js"],"names":["PMChannel","constructor","data","client","type","lastMessageID","last_message_id","messages","options","maxCachedMessages","recipients","forEach","recipient","add","internal","users","name","undefined","owner","get","owner_id","icon","lastMessage","toString","toObject","keys","obj","k","sendMessage","apply","arguments","send","sendTTSMessage","sendTTS","sendFile","startTyping","stopTyping","getLogs","getChannelLogs","getMessage"],"mappings":"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","file":"PMChannel.js","sourcesContent":["\"use strict\";\n\nimport Channel from \"./Channel\";\nimport User from \"./User\";\nimport Cache from \"../Util/Cache\";\nimport {reg} from \"../Util/ArgumentRegulariser\";\n\nexport default class PMChannel extends Channel {\n\tconstructor(data, client){\n\t\tsuper(data, client);\n\n\t\tthis.type = data.type;\n\t\tthis.lastMessageID = data.last_message_id || data.lastMessageID;\n\t\tthis.messages = new Cache(\"id\", client.options.maxCachedMessages);\n        if(data.recipients instanceof Cache) {\n        \tthis.recipients = data.recipients;\n        } else {\n\t\t\tthis.recipients = new Cache();\n        \tdata.recipients.forEach((recipient) => {\n\t            this.recipients.add(this.client.internal.users.add(new User(recipient, this.client)));\n\t        });\n        }\n        this.name = data.name !== undefined ? data.name : this.name;\n        this.owner = data.owner || this.client.internal.users.get(\"id\", data.owner_id);\n        this.icon = data.icon !== undefined ? data.icon : this.icon;\n\t}\n\n\tget recipient() {\n\t\treturn this.recipients[0];\n\t}\n\n\t/* warning! may return null */\n\tget lastMessage(){\n\t\treturn this.messages.get(\"id\", this.lastMessageID);\n\t}\n\n\ttoString(){\n\t\treturn this.recipient.toString();\n\t}\n\n\ttoObject() {\n\t\tlet keys = ['type', 'lastMessageID', 'recipient'],\n\t\t\tobj = {};\n\n\t\tfor (let k of keys) {\n\t\t\tobj[k] = this[k];\n\t\t}\n\n\t\treturn obj;\n\t}\n\n\tsendMessage(){\n\t\treturn this.client.sendMessage.apply(this.client, reg(this, arguments));\n\t}\n\n\tsend() {\n\t\treturn this.client.sendMessage.apply(this.client, reg(this, arguments));\n\t}\n\n\tsendTTSMessage(){\n\t\treturn this.client.sendTTSMessage.apply(this.client, reg(this, arguments));\n\t}\n\n\tsendTTS() {\n\t\treturn this.client.sendTTSMessage.apply(this.client, reg(this, arguments));\n\t}\n\n\tsendFile() {\n\t\treturn this.client.sendFile.apply(this.client, reg(this, arguments));\n\t}\n\n\tstartTyping() {\n\t\treturn this.client.startTyping.apply(this.client, reg(this, arguments));\n\t}\n\n\tstopTyping() {\n\t\treturn this.client.stopTyping.apply(this.client, reg(this, arguments));\n\t}\n\n\tgetLogs() {\n\t\treturn this.client.getChannelLogs.apply(this.client, reg(this, arguments));\n\t}\n\n\tgetMessage() {\n\t\treturn this.client.getMessage.apply(this.client, reg(this, arguments));\n\t}\n}\n"]}