{"version":3,"sources":["../../src/Structures/PMChannel.js"],"names":["PMChannel","data","client","type","lastMessageID","last_message_id","messages","options","maxCachedMessages","recipients","forEach","recipient","add","internal","users","name","undefined","owner","get","owner_id","icon","toString","keys","obj","k","sendMessage","apply","arguments","sendTTSMessage","sendFile","startTyping","stopTyping","getChannelLogs","getMessage"],"mappings":"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","file":"PMChannel.js","sourcesContent":["\"use strict\";\n\nimport Channel from \"./Channel\";\nimport User from \"./User\";\nimport Cache from \"../Util/Cache\";\nimport {reg} from \"../Util/ArgumentRegulariser\";\n\nexport default class PMChannel extends Channel {\n\tconstructor(data, client){\n\t\tsuper(data, client);\n\n\t\tthis.type = data.type;\n\t\tthis.lastMessageID = data.last_message_id || data.lastMessageID;\n\t\tthis.messages = new Cache(\"id\", client.options.maxCachedMessages);\n        if(data.recipients instanceof Cache) {\n        \tthis.recipients = data.recipients;\n        } else {\n\t\t\tthis.recipients = new Cache();\n        \tdata.recipients.forEach((recipient) => {\n\t            this.recipients.add(this.client.internal.users.add(new User(recipient, this.client)));\n\t        });\n        }\n        this.name = data.name !== undefined ? data.name : this.name;\n        this.owner = data.owner || this.client.internal.users.get(\"id\", data.owner_id);\n        this.icon = data.icon !== undefined ? data.icon : this.icon;\n\t}\n\n\tget recipient() {\n\t\treturn this.recipients[0];\n\t}\n\n\t/* warning! may return null */\n\tget lastMessage(){\n\t\treturn this.messages.get(\"id\", this.lastMessageID);\n\t}\n\n\ttoString(){\n\t\treturn this.recipient.toString();\n\t}\n\n\ttoObject() {\n\t\tlet keys = ['type', 'lastMessageID', 'recipient'],\n\t\t\tobj = {};\n\n\t\tfor (let k of keys) {\n\t\t\tobj[k] = this[k];\n\t\t}\n\n\t\treturn obj;\n\t}\n\n\tsendMessage(){\n\t\treturn this.client.sendMessage.apply(this.client, reg(this, arguments));\n\t}\n\n\tsend() {\n\t\treturn this.client.sendMessage.apply(this.client, reg(this, arguments));\n\t}\n\n\tsendTTSMessage(){\n\t\treturn this.client.sendTTSMessage.apply(this.client, reg(this, arguments));\n\t}\n\n\tsendTTS() {\n\t\treturn this.client.sendTTSMessage.apply(this.client, reg(this, arguments));\n\t}\n\n\tsendFile() {\n\t\treturn this.client.sendFile.apply(this.client, reg(this, arguments));\n\t}\n\n\tstartTyping() {\n\t\treturn this.client.startTyping.apply(this.client, reg(this, arguments));\n\t}\n\n\tstopTyping() {\n\t\treturn this.client.stopTyping.apply(this.client, reg(this, arguments));\n\t}\n\n\tgetLogs() {\n\t\treturn this.client.getChannelLogs.apply(this.client, reg(this, arguments));\n\t}\n\n\tgetMessage() {\n\t\treturn this.client.getMessage.apply(this.client, reg(this, arguments));\n\t}\n}\n"]}