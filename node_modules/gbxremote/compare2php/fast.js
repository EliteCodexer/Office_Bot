
var gbxremote = require('../lib/gbxremote.js');
// How many times to query the server
var n = 200;

var client = gbxremote.createClient(5000);

client.on('error', function(err) {
	console.log(err);
	console.log(err.stack);
})
.on('connect', function onConnect() {
	var left = n;
	var start = Date.now();

	for (var i = 0; i < n; i++) {
		client.query("GetPlayerList", [255, 0, 2], function(err, res) {
			if (err) {
				console.log(err);
			} else {
				if (--left <= 0) {
					console.log("Done! (%d ms)", Date.now()-start);

					client.terminate();
				}
			}
		});
	}
});

// RESULT:
// 126 ms
